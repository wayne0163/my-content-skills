---
name: news-content-factory
metadata:
  version: 2.1.0
  author: You
  tags: [news, content-generation, analysis, writing, gemini-cli]
  trigger_keywords: ["今日新闻", "新闻解读", "写新闻分析", "news analysis", "热点写作", "新闻选题", "今日热点", "写热点", "新闻评论"]
description: 动态配置的新闻内容工厂：从外部 reference 文件实时加载风格和结构配置，支持从搜索到成品生成的完整工作流。适用于自媒体作者快速产出深度文章/企业市场部做行业分析报告。
---

## Objective
在单一会话中完成"信息搜集 → 关联分析 → 动态配置 → 风格渲染"的全流程：
1. **动态加载**：在配置环节实时读取外部 `styles.md` 和 `structures.md`。
2. **精准搜索**：根据领域获取当日高质量新闻。
3. **深度关联**：挖掘多条新闻之间的底层逻辑。
4. **成品生成**：产出高度符合特定风格和结构要求的深度内容。

## Workflow Architecture（简化版两阶段流程）
### 阶段一：信息输入与初步筛选
mermaid
graph LR
    A[1.领域确认] --> B[2.新闻搜索]
    B --> C[3.候选展示]
    C --> D[4.组合选择]


### 阶段二：内容策略定制与生成
mermaid
graph LR
    D --> E[5.角度生成]
    E --> F[6.方向确认]
    F --> G[7.规格配置]
    G --> H[8.内容生成与交付]
    H --> I[9.生成提要、朋友圈文案和配图]


> **关键交互节点**：用户输入（领域/新闻选择/角度偏好）、系统输出（新闻列表/关联性分析/配置推荐），

---

## Step-by-Step Execution Guide

### Step 1: 领域确认 (Domain Confirmation)
**交互逻辑**：  
请告诉我你感兴趣的领域（可多选，用空格或逗号分隔）：  
[1] 科技/互联网/AI    [2] 财经/商业/股市    [3] 国际政治/外交  
[4] 国内政策/民生     [5] 社会热点/舆情     [6] 文化/娱乐/影视  
[7] 新能源/汽车       [8] 医疗/健康         [9] 教育/职场  
[0] 其他：______  

**其他选项**：  
- 地域范围：[A] 国内新闻为主（中文源）    [B] 国际新闻为主（外文源翻译）    [C] 两者结合（对比分析）  
- 搜索数量：近__条新闻（建议5-15条，默认12条）  

**用户输入格式示例**：  
- 默认输入：`1 2 C 12`（科技和财经领域，国际国内结合，搜索12条新闻）  
- 自定义新闻替代搜索：`Z 比亚迪降价; 特斯拉财报; https://example.com/news1`（直接用新闻标题/网址替代搜索结果）  
- 若格式错误（如漏地域范围），系统会提示：“检测到输入不完整，当前识别为【领域：科技/财经】，请补充【地域范围（A/B/C）】和【数量（可选）】”。

---

### Step 2: 新闻搜索 (News Search)
**执行规范**：  
- 查询 [今日/最近24小时] [领域] [地域] 的重要新闻，覆盖权威财经、科技及官方媒体（如国内：新华社、财新网；国际：Reuters）。  
- 采集内容：标题、来源、发布时间、摘要、原文 URL。  
- 去重：同一事件的不同报道合并为一条，标注多来源（如“📰来源1+来源2”）。  
- 排序：按热度 + 时效性综合排序，标注领域标签（#AI #政策 #国际）及可信度（🏛️官方 / 📰商业 / 👤自媒体）。  

**若搜索无结果或结果过少**：自动扩大时间范围至48小时，或提示用户更换领域/关键词。

---

### Step 3: 候选展示 (Candidate Display)
**呈现方式**：  
- 按类别分组展示候选新闻，每条包含 `[编号] [来源] 标题` 及1-2句核心重要性摘要。  
- **💡 选择提示**：  
  • 输入两条编号组合分析（如：1+3）→ 挖掘关联逻辑；  
  • 输入单条编号（如：5）→ 深度解读；  
  • 输入"r"重新搜索其他领域；  
  • 输入"m"查看更多新闻（加载次热度的5条）；  
  • 输入"s [关键词]"搜索特定关键词。
- 需从以上选项中选择或输入指令，系统将根据您的选择进入下一步。

---

### Step 4: 组合选择 (Combine & Select)
**处理逻辑**：  
锁定用户选定的新闻，提取详细内容并分析：  
✅ **您选择的新闻组合**：  
【新闻A】[标题] → 核心事实：[一句话概括] → 关键词：[3-5个] → 情绪倾向：[正面/负面/中性/争议]  
【新闻B】[标题] → 核心事实：[一句话概括] → 关键词：[3-5个] → 情绪倾向：[正面/负面/中性/争议]  

🔗 **关联性分析（中文语境）**：  
- 表面关联：[直接联系，如同一政策影响]；  
- 深层关联：[间接联系，如因果/对比反差]；  
- 冲突点：[对立/矛盾点]；  
- 舆情看点：[中文互联网讨论焦点]；  
- 分析价值：[一起看的独特视角]。  
允许用户补充自定义观察点。请检查分析内容，如需补充观察点可输入，确认后进入角度生成。

---

### Step 5: 角度生成 (Angles Generation)
**深度挖掘3个预设角度**（基于当前新闻组合生成）：  
💡 **角度一：宏观/趋势型**（适合行业观察者）  
- 切入点：大趋势背景下的必然性；  
- 核心观点：[预测性观点，如“标志XX时代开启”]；  
- 适合受众：B端读者/投资人；  
- 文章调性：理性/数据驱动；  
- 预计字数：1500-2000字。  

💡 **角度二：微观/故事型**（适合大众读者）  
- 切入点：具体人物/场景的小见大；  
- 核心观点：[个体在大趋势中的命运]；  
- 适合受众：C端读者/普通消费者；  
- 文章调性：有温度/共情；  
- 预计字数：1200-1500字。  

💡 **角度三：批判/思辨型**（适合深度阅读者）  
- 切入点：质疑表面现象，挖深层矛盾；  
- 核心观点：[反直觉观点/问题揭示]；  
- 适合受众：业内人士/思考型读者；  
- 文章调性：犀利/有洞见；  
- 预计字数：1500-2000字。  

**交互选项**：  
- 选择角度（输入1/2/3）并指定字数；  
- “重新生成”：基于同一组合生成新角度；  
- “换组合”：回到上一步选其他新闻；  
- “深度分析”：展开某个角度的大纲；  
- “混合”：结合两个角度特点。

请选择一个角度（输入1/2/3）并指定字数，或选择“重新生成/换组合”，确认后进入方向确认。
---

### Step 6: 方向确认 (Direction Confirmation)
**蓝图终审**：  
1. 🎯 **文章核心论点**（一句话概括，全文灵魂）；  
2. **标题方向（3选1或自定义）**：  
   A. 直击痛点型（如“XX崩了，但危机才刚开始”）；  
   B. 悬念好奇型（如“为什么XX和XX看似无关，却暴露真相”）；  
   C. 观点鲜明型（如“XX不是终点，而是XX时代起点”）；  
   D. 自定义标题。  
3. **需确认**：核心论点、结论偏向（审慎/乐观/悲观等）、必须包含的关键事实。
请确认核心论点、标题方向及结论偏向，确认后进入规格配置。
---

### Step 7: 规格配置 (Dynamic Reference Loading)
**配置加载**：  
1. 调用 `references/styles.md` 和 `structures.md`，展示S系列（结构）和P系列（风格）清单及特征；  
2. **智能推荐**：根据蓝图自动推荐1个 `S+P` 组合（如“S3递进结构 + P2热情未来型风格”），并说明理由；  
3. **交互**：用户确认或选择其他组合。

> **文件说明**：若 `references/styles.md` 或 `structures.md` 缺失，将启用内置默认风格（P1 理智随性型）和结构（S1 问题-方案-展望），并提示用户。
请确认推荐组合或选择其他结构/风格，确认后进入内容生成。
---

### Step 8: 内容生成与交付 (Content Generation & Delivery)
**执行流程**：  
1. **配置确认**：展示标题/角度/结构/风格/字数/平台（默认移动端优先-公众号），用户确认；  
2. **文章生成**：按选定要求生成全文，优化细节（如反常识开场、关联新闻点题、逻辑链条清晰、中文表达自然）。  

✅ **生成文章示例结构**（非固定模板）：  
- 开场：新鲜细节/反常识观点 + 两条新闻关联；  
- 核心：精简新闻事实 + 角度展开（案例/数据支撑）；  
- 升华：趋势洞察 + 可操作建议；  
- 收尾：短句号召/余韵。  

**优化点**：自动检查结尾吸引力，提供备选方案。  

**后续选项**：  
• “满意”：保存文章，结束会话；  
• “调整结构”：修改某部分（如合并段落）；  
• “调整风格”：换风格重写；  
• “重写某段”：指定段落优化；  
• “扩展内容”：增加字数/数据；  
• “压缩内容”：精简字数；  
• “换角度”：回到Step 5；  
• “保存风格”：自定义风格存模板；  
• “导出”：保存为 `yyyy-mm-dd+标题.md` 文件。
请确认标题/角度/结构/风格/字数/平台，确认后开始生成全文。
---

### Step 9: 生成提要、朋友圈文案和配图
1. **提要（Summary）**：3-5句突出核心观点（示例：揭示XX和XX的联系，分析深层逻辑与趋势洞察）。  
2. **朋友圈文案（Social Media Copy）**：1-2句吸引分享（示例：没想到XX和XX有这样的联系！真相竟是...）。  
3. **配图建议（Image Suggestions）**：结合新闻核心元素，风格简洁现代（如科技+政策→抽象图标+数据流背景）。

---

## Commands & Shortcuts（口语化指令）
| 指令/别名          | 作用                     | 说明                          |
|--------------------|--------------------------|-----------------------------|
| `/reload`          | 强制重读配置文件         | 刷新 `styles.md` 和 `structures.md` |
| `/style analyze`   | 分析文本风格             | 提取特征并与预设对比          |
| `/title` 或 `/新标题` | 重新生成5个标题          | 基于当前角度和论点            |
| `/structure`       | 切换文章结构             | 展示S1-S6清单，用户选择后重组  |
| `/style` 或 `/风格`  | 切换写作风格             | 展示P1-P6清单，用户选择后重写  |
| `/save [name]`     | 保存配置为快捷方案       | 记录角度+结构+风格组合        |
| `/extend [段落]`   | 扩展某段内容             | 增加细节/数据/论证            |
| `/shorten [段落]`  | 压缩某段内容             | 精简保留核心信息              |
| `/fact [查询]`     | 核实事实                 | 二次搜索验证文中事实点        |

---

## Error Handling & Fallback
| 异常场景               | 处理方式                                  |
|------------------------|-----------------------------------------|
| 配置文件缺失           | 启用默认风格/结构并提示用户               |
| 搜索无结果             | 扩大时间范围或提示换领域/关键词           |
| 用户输入无效编号       | 友好提示有效范围，重新展示候选列表        |
| 文章生成失败           | 保留已生成部分，提示“重试”或“手动调整”    |
| 文件保存失败           | 提示检查目录权限或提供复制粘贴方案        |

---

**版本迭代**：当前版本2.1.0（优化新闻搜索去重逻辑与用户交互流程）  
**适用场景**：快速产出深度新闻分析/行业解读/热点评论，支持灵活定制与多平台适配。
 

修改说明：

1. 结构调整：将原9步流程简化为两阶段（信息输入+内容生成），增加流程图辅助理解，关键节点标注用户操作。
2. 内容优化：用户输入示例表格化、新闻来源举例透明化、角度生成增加场景化类比、配置加载说明文件作用。
3. 交互体验：指令增加口语化别名（如/新标题）、错误处理提示更友好、结果交付分层展示选项。
4. 细节补充：元数据增加适用场景说明，版本迭代记录，移动端适配强调。